<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Coordinate System Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        button {
            padding: 10px 15px;
            margin: 5px;
        }

        canvas {
            border: 2px solid black;
            margin: 20px 0;
        }

        .log {
            background: #f0f0f0;
            padding: 10px;
            font-family: monospace;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <h1>🧭 Coordinate System Test</h1>

    <button onclick="testDirections()">Test All 4 Directions</button>
    <button onclick="testSquare()">Test Perfect Square</button>
    <button onclick="clearCanvas()">Clear Canvas</button>

    <canvas id="graphicsCanvas" width="400" height="400"></canvas>

    <div class="log" id="log">Ready to test coordinate system...</div>

    <script src="js/interpreter.js"></script>

    <script>
        let turtle, log;

        function init() {
            const canvas = document.getElementById('graphicsCanvas');
            log = document.getElementById('log');
            turtle = new WorkingTurtle(canvas);

            logMsg(`🐢 Turtle initialized at center: (${turtle.x}, ${turtle.y})`);
            logMsg(`📐 Canvas size: ${canvas.width}x${canvas.height}`);
            logMsg(`🧭 Starting angle: ${turtle.angle}° (should be 90° = up)`);
        }

        function logMsg(msg) {
            console.log(msg);
            log.innerHTML += msg + '<br>';
            log.scrollTop = log.scrollHeight;
        }

        async function testDirections() {
            logMsg('\n🧭 Testing all 4 directions from center...');

            turtle.clearCanvas();

            // Test UP (90°)
            turtle.angle = 90;
            logMsg('↑ Testing UP (90°)');
            turtle.forward(50);

            await sleep(500);
            turtle.home();

            // Test RIGHT (0°)
            turtle.angle = 0;
            logMsg('→ Testing RIGHT (0°)');
            turtle.forward(50);

            await sleep(500);
            turtle.home();

            // Test DOWN (270°)
            turtle.angle = 270;
            logMsg('↓ Testing DOWN (270°)');
            turtle.forward(50);

            await sleep(500);
            turtle.home();

            // Test LEFT (180°)
            turtle.angle = 180;
            logMsg('← Testing LEFT (180°)');
            turtle.forward(50);

            logMsg('✅ Direction test complete - should see 4 lines from center');
        }

        async function testSquare() {
            logMsg('\n📐 Testing perfect square...');

            turtle.clearCanvas();
            turtle.home();

            for (let i = 0; i < 4; i++) {
                logMsg(`Side ${i + 1}: Forward 80, then turn right 90°`);
                turtle.forward(80);
                await sleep(300);
                turtle.right(90);
                await sleep(300);
            }

            logMsg('✅ Square test complete');
        }

        function clearCanvas() {
            turtle.clearCanvas();
            logMsg('🧹 Canvas cleared, turtle back to center');
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        window.addEventListener('load', init);
    </script>
</body>

</html>