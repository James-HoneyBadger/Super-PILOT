<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graphics Test - DIRECT</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
        }

        .controls {
            margin-bottom: 20px;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .test-btn {
            background: #28a745;
            color: white;
        }

        .clear-btn {
            background: #dc3545;
            color: white;
        }

        canvas {
            border: 2px solid #333;
            border-radius: 4px;
            display: block;
            margin: 20px auto;
        }

        .log {
            background: #f8f9fa;
            padding: 10px;
            border-left: 4px solid #007bff;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üê¢ DIRECT Graphics Test</h1>
        <p>This test bypasses ALL IDE complexity and tests graphics DIRECTLY.</p>

        <div class="controls">
            <button class="test-btn" onclick="testDirect()">üß™ Test Direct Graphics</button>
            <button class="clear-btn" onclick="clearCanvas()">üßπ Clear Canvas</button>
            <button onclick="testSquare()">üìê Draw Square</button>
            <button onclick="testSpiral()">üåÄ Draw Spiral</button>
        </div>

        <canvas id="directCanvas" width="500" height="400"></canvas>

        <div id="log" class="log">Ready for direct graphics test...</div>
    </div>

    <script>
        // WORKING TURTLE - COPIED EXACTLY FROM WORKING VERSION
        class WorkingTurtle {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.x = canvas.width / 2;
                this.y = canvas.height / 2;
                this.angle = 0;
                this.penDown = true;
                this.color = 'blue';
                this.penWidth = 2;

                this.clearCanvas();
            }

            clearCanvas() {
                this.ctx.fillStyle = 'white';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);

                // Draw grid
                this.ctx.strokeStyle = '#f0f0f0';
                this.ctx.lineWidth = 1;
                for (let x = 0; x <= this.canvas.width; x += 20) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(x, 0);
                    this.ctx.lineTo(x, this.canvas.height);
                    this.ctx.stroke();
                }
                for (let y = 0; y <= this.canvas.height; y += 20) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(0, y);
                    this.ctx.lineTo(this.canvas.width, y);
                    this.ctx.stroke();
                }

                // Draw center lines
                this.ctx.strokeStyle = '#e0e0e0';
                this.ctx.lineWidth = 2;
                this.ctx.beginPath();
                this.ctx.moveTo(this.canvas.width / 2, 0);
                this.ctx.lineTo(this.canvas.width / 2, this.canvas.height);
                this.ctx.moveTo(0, this.canvas.height / 2);
                this.ctx.lineTo(this.canvas.width, this.canvas.height / 2);
                this.ctx.stroke();

                this.drawTurtle();
            }

            forward(distance) {
                const radians = this.angle * Math.PI / 180;
                const newX = this.x + Math.cos(radians) * distance;
                const newY = this.y - Math.sin(radians) * distance;

                if (this.penDown) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.x, this.y);
                    this.ctx.lineTo(newX, newY);
                    this.ctx.strokeStyle = this.color;
                    this.ctx.lineWidth = this.penWidth;
                    this.ctx.stroke();
                }

                this.x = newX;
                this.y = newY;
                this.drawTurtle();
            }

            right(degrees) {
                this.angle = (this.angle - degrees) % 360;
                this.drawTurtle();
            }

            left(degrees) {
                this.angle = (this.angle + degrees) % 360;
                this.drawTurtle();
            }

            penup() {
                this.penDown = false;
            }

            pendown() {
                this.penDown = true;
            }

            setcolor(color) {
                this.color = color;
            }

            home() {
                this.x = this.canvas.width / 2;
                this.y = this.canvas.height / 2;
                this.angle = 0;
                this.drawTurtle();
            }

            drawTurtle() {
                this.ctx.save();
                this.ctx.fillStyle = 'white';
                this.ctx.fillRect(this.x - 15, this.y - 15, 30, 30);

                this.ctx.strokeStyle = '#f0f0f0';
                this.ctx.lineWidth = 1;
                const startX = Math.floor((this.x - 15) / 20) * 20;
                const endX = Math.ceil((this.x + 15) / 20) * 20;
                const startY = Math.floor((this.y - 15) / 20) * 20;
                const endY = Math.ceil((this.y + 15) / 20) * 20;

                for (let x = startX; x <= endX; x += 20) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(x, this.y - 15);
                    this.ctx.lineTo(x, this.y + 15);
                    this.ctx.stroke();
                }
                for (let y = startY; y <= endY; y += 20) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.x - 15, y);
                    this.ctx.lineTo(this.x + 15, y);
                    this.ctx.stroke();
                }

                this.ctx.translate(this.x, this.y);
                this.ctx.rotate(-this.angle * Math.PI / 180);

                this.ctx.beginPath();
                this.ctx.moveTo(10, 0);
                this.ctx.lineTo(-8, -6);
                this.ctx.lineTo(-5, 0);
                this.ctx.lineTo(-8, 6);
                this.ctx.closePath();

                this.ctx.fillStyle = this.penDown ? '#e74c3c' : '#95a5a6';
                this.ctx.fill();
                this.ctx.strokeStyle = 'black';
                this.ctx.lineWidth = 1;
                this.ctx.stroke();

                this.ctx.restore();
            }
        }

        let turtle;
        let logElement;

        function log(message) {
            console.log(message);
            if (logElement) {
                logElement.textContent += message + '\n';
                logElement.scrollTop = logElement.scrollHeight;
            }
        }

        function initTurtle() {
            const canvas = document.getElementById('directCanvas');
            logElement = document.getElementById('log');

            log('üîÑ Initializing direct turtle...');
            log('Canvas found: ' + !!canvas);
            log('Canvas dimensions: ' + canvas.width + 'x' + canvas.height);

            turtle = new WorkingTurtle(canvas);
            log('‚úÖ Direct turtle initialized successfully!');
            return turtle;
        }

        function testDirect() {
            log('\nüß™ === DIRECT GRAPHICS TEST ===');

            if (!turtle) {
                initTurtle();
            }

            try {
                log('Testing basic forward movement...');
                turtle.forward(50);
                log('‚úÖ Forward 50 - SUCCESS');

                log('Testing right turn...');
                turtle.right(90);
                log('‚úÖ Right 90 - SUCCESS');

                log('Testing another forward...');
                turtle.forward(50);
                log('‚úÖ Forward 50 - SUCCESS');

                log('üéâ DIRECT TEST COMPLETED SUCCESSFULLY!');
            } catch (error) {
                log('‚ùå ERROR: ' + error.message);
            }
        }

        function clearCanvas() {
            if (!turtle) initTurtle();
            turtle.clearCanvas();
            log('Canvas cleared');
        }

        function testSquare() {
            log('\nüìê Drawing square...');
            if (!turtle) initTurtle();

            turtle.clearCanvas();
            for (let i = 0; i < 4; i++) {
                turtle.forward(100);
                turtle.right(90);
            }
            log('‚úÖ Square completed');
        }

        function testSpiral() {
            log('\nüåÄ Drawing spiral...');
            if (!turtle) initTurtle();

            turtle.clearCanvas();
            turtle.setcolor('red');

            for (let i = 1; i <= 8; i++) {
                turtle.forward(i * 10);
                turtle.right(91);
            }
            log('‚úÖ Spiral completed');
        }

        // Initialize when page loads
        window.addEventListener('load', () => {
            log('Page loaded, ready for testing...');
        });
    </script>
</body>

</html>